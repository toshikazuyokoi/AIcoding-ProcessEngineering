# APIテスト設計書 - Issue Tracking System

## メタデータ
- ドキュメントID: API-TEST-001
- 作成日: 2025-09-16
- 作成者: GitHub Copilot
- プロジェクト: Issue Tracking System MVP
- 関連文書: ../class-design.md, ../interfaces.md

---

## 1. テスト対象API一覧
- /api/users（POST, GET, PUT, DELETE, 認証, 権限）
- /api/issues（POST, GET, PUT, DELETE, 状態変更, 割当, コメント, 添付）
- /api/notifications（GET, PUT, DELETE, 既読化）
- /api/settings（GET, PUT, バリデーション）
- /api/statistics（GET）

---

## 2. テストケース一覧（網羅度100%）

### /api/users
| テストID | メソッド | 観点 | 入力 | 期待結果 |
|---------|----------|------|------|----------|
| AT-001  | POST     | 正常系 | 有効なユーザー情報 | 201, ユーザー情報返却 |
| AT-002  | POST     | 異常系 | メール重複 | 400, エラー返却 |
| AT-003  | POST     | 異常系 | 必須項目未入力 | 400, エラー返却 |
| AT-004  | GET      | 正常系 | 有効なID | 200, ユーザー情報返却 |
| AT-005  | GET      | 異常系 | 存在しないID | 404, エラー返却 |
| AT-006  | PUT      | 正常系 | 有効な更新情報 | 200, 更新成功 |
| AT-007  | PUT      | 異常系 | 無効な値 | 400, エラー返却 |
| AT-008  | DELETE   | 正常系 | 有効なID | 204, 削除成功 |
| AT-009  | DELETE   | 異常系 | 存在しないID | 404, エラー返却 |
| AT-010  | 認証     | 正常系 | 正しい認証情報 | 200, 認証成功 |
| AT-011  | 認証     | 異常系 | 誤った認証情報 | 401, エラー返却 |
| AT-012  | 権限     | 正常系 | 権限あり | 200, 許可 |
| AT-013  | 権限     | 異常系 | 権限なし | 403, 拒否 |

### /api/issues
| テストID | メソッド | 観点 | 入力 | 期待結果 |
|---------|----------|------|------|----------|
| AT-101  | POST     | 正常系 | 有効なチケット情報 | 201, チケット情報返却 |
| AT-102  | POST     | 異常系 | 必須項目未入力 | 400, エラー返却 |
| AT-103  | POST     | 異常系 | 無効な値 | 400, エラー返却 |
| AT-104  | GET      | 正常系 | 有効なID | 200, チケット情報返却 |
| AT-105  | GET      | 異常系 | 存在しないID | 404, エラー返却 |
| AT-106  | PUT      | 正常系 | 有効な更新情報 | 200, 更新成功 |
| AT-107  | PUT      | 異常系 | 無効な値 | 400, エラー返却 |
| AT-108  | DELETE   | 正常系 | 有効なID | 204, 削除成功 |
| AT-109  | DELETE   | 異常系 | 存在しないID | 404, エラー返却 |
| AT-110  | 状態変更 | 正常系 | 有効な状態 | 200, 状態変更成功 |
| AT-111  | 状態変更 | 異常系 | 無効な状態 | 400, エラー返却 |
| AT-112  | 割当     | 正常系 | 有効なユーザーID | 200, 割当成功 |
| AT-113  | 割当     | 異常系 | 存在しないユーザーID | 404, エラー返却 |
| AT-114  | コメント | 正常系 | 有効なコメント | 201, コメント追加成功 |
| AT-115  | コメント | 異常系 | 空コメント | 400, エラー返却 |
| AT-116  | 添付     | 正常系 | 有効なファイル | 201, 添付成功 |
| AT-117  | 添付     | 異常系 | 無効なファイル | 400, エラー返却 |

### /api/notifications
| テストID | メソッド | 観点 | 入力 | 期待結果 |
|---------|----------|------|------|----------|
| AT-201  | GET      | 正常系 | 有効なID | 200, 通知情報返却 |
| AT-202  | GET      | 異常系 | 存在しないID | 404, エラー返却 |
| AT-203  | PUT      | 正常系 | 有効なID | 200, 既読化成功 |
| AT-204  | PUT      | 異常系 | 存在しないID | 404, エラー返却 |
| AT-205  | DELETE   | 正常系 | 有効なID | 204, 削除成功 |
| AT-206  | DELETE   | 異常系 | 存在しないID | 404, エラー返却 |

### /api/settings
| テストID | メソッド | 観点 | 入力 | 期待結果 |
|---------|----------|------|------|----------|
| AT-301  | GET      | 正常系 | 有効なリクエスト | 200, 設定取得成功 |
| AT-302  | GET      | 異常系 | 無効なリクエスト | 400, エラー返却 |
| AT-303  | PUT      | 正常系 | 有効な設定値 | 200, 更新成功 |
| AT-304  | PUT      | 異常系 | 無効な値 | 400, エラー返却 |

### /api/statistics
| テストID | メソッド | 観点 | 入力 | 期待結果 |
|---------|----------|------|------|----------|
| AT-401  | GET      | 正常系 | 有効なリクエスト | 200, 統計取得成功 |
| AT-402  | GET      | 異常系 | 無効なリクエスト | 400, エラー返却 |

---

## 3. 境界値・異常系テスト
- 各APIの入力値（最大長、最小長、空文字、NULL、型不一致、範囲外、重複、未存在、権限なし等）を網羅

---

## 4. トレーサビリティ
- 各テストケースはSTEP3のAPI定義・クラス設計・シーケンス図と紐付け

---

## 5. 完了確認チェックリスト
- [x] 全API・分岐・異常系・境界値を網羅
- [x] テストID・観点・期待結果を明記
- [x] トレーサビリティを明記
- [x] Markdown記法・標準テーブルを使用
- [x] STEP3設計成果物との整合性

## 次のアクション
1. APIテストケースの実装
2. STEP4品質ゲートでの検証
