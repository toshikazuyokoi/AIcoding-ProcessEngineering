# 品質ゲート5: テストケース定義品質チェックリスト

## メタデータ
| 項目 | 内容 |
|------|------|
| 文書ID | QG5-001 |
| 関連文書 | CASE-001 (テストケース定義書)<br>TARGET-001 (テスト対象一覧)<br>QG4-001 (品質ゲート4判定結果) |
| 作成日 | YYYY-MM-DD |
| 最終更新日 | YYYY-MM-DD |
| 作成者 | [品質保証担当者名] |
| 承認者 | [品質保証マネージャー名] |
| ゲート通過日 | YYYY-MM-DD |
| 判定結果 | Pass/Fail/Conditional Pass |
| バージョン | 1.0 |
| ステータス | ドラフト |

## 1. 定量的評価項目

### 1.1 ケース数整合性チェック
| 評価項目 | 基準 | 実績 | 判定 | 備考 |
|----------|------|------|------|------|
| **テスト対象一覧との一致率** | ≥ 95% | [%] | ✅/❌ | [詳細] |
| 単体テストケース整合性 | ≥ 95% | [%] | ✅/❌ | [詳細] |
| 結合テストケース整合性 | ≥ 95% | [%] | ✅/❌ | [詳細] |
| E2Eテストケース整合性 | ≥ 95% | [%] | ✅/❌ | [詳細] |

#### 1.1.1 整合性算出方法
```
整合性率 = (実装ケース数 / 期待ケース数) × 100%

期待ケース数 = テスト対象一覧での算出ケース数
実装ケース数 = テストケース定義書での定義ケース数
```

#### 1.1.2 詳細分析
| テスト対象ID | 対象名 | 期待ケース数 | 実装ケース数 | 整合性率 | 状況 |
|-------------|--------|-------------|-------------|----------|------|
| TGT-001 | [対象名] | [数] | [数] | [%] | ✅/❌ |
| TGT-002 | [対象名] | [数] | [数] | [%] | ✅/❌ |
| TGT-003 | [対象名] | [数] | [数] | [%] | ✅/❌ |
| **合計** | **[数]対象** | **[数]ケース** | **[数]ケース** | **[%]** | **✅/❌** |

### 1.2 カバレッジ完全性チェック
| 評価項目 | 基準 | 実績 | 判定 | 備考 |
|----------|------|------|------|------|
| **全対象のカバレッジ** | = 100% | [%] | ✅/❌ | [詳細] |
| 正常系カバレッジ | = 100% | [%] | ✅/❌ | [詳細] |
| 異常系カバレッジ | ≥ 90% | [%] | ✅/❌ | [詳細] |
| 境界値カバレッジ | ≥ 80% | [%] | ✅/❌ | [詳細] |

#### 1.2.1 カバレッジ分析
| カバレッジ種別 | 対象数 | カバー数 | 未カバー数 | カバレッジ率 |
|---------------|--------|----------|------------|-------------|
| テスト対象 | [数] | [数] | [数] | [%] |
| 機能要件 | [数] | [数] | [数] | [%] |
| ビジネスルール | [数] | [数] | [数] | [%] |
| エラー条件 | [数] | [数] | [数] | [%] |

### 1.3 トレーサビリティチェック
| 評価項目 | 基準 | 実績 | 判定 | 備考 |
|----------|------|------|------|------|
| **対象-ケース対応** | = 100% | [%] | ✅/❌ | [詳細] |
| 要件-ケース対応 | = 100% | [%] | ✅/❌ | [詳細] |
| 仕様-ケース対応 | = 100% | [%] | ✅/❌ | [詳細] |

#### 1.3.1 トレーサビリティマトリクス確認
| 対応関係 | 総数 | 対応済み | 未対応 | 対応率 |
|----------|------|----------|--------|--------|
| テスト対象 → テストケース | [数] | [数] | [数] | [%] |
| 要件 → テストケース | [数] | [数] | [数] | [%] |
| 仕様 → テストケース | [数] | [数] | [数] | [%] |

### 1.4 実装可能性チェック
| 評価項目 | 基準 | 実績 | 判定 | 備考 |
|----------|------|------|------|------|
| **実装可能ケース率** | = 100% | [%] | ✅/❌ | [詳細] |
| 入力データ明確性 | = 100% | [%] | ✅/❌ | [詳細] |
| 期待結果明確性 | = 100% | [%] | ✅/❌ | [詳細] |
| 前提条件明確性 | = 100% | [%] | ✅/❌ | [詳細] |

## 2. 品質評価プロセス

### 2.1 評価手順
1. **定量的チェック**
   - テスト対象一覧の期待ケース数を集計
   - テストケース定義書の実装ケース数を集計
   - 整合性率を算出（実装数/期待数 × 100%）

2. **カバレッジ確認**
   - 全対象がテストケースでカバーされているか確認
   - 正常系・異常系・境界値の網羅性確認
   - 未カバー項目の特定と影響分析

3. **トレーサビリティ確認**
   - 対象-ケース対応表の完全性確認
   - 要件-ケース対応表の完全性確認
   - 双方向の追跡可能性確認

4. **実装可能性確認**
   - 全ケースが実装可能な形で定義されているか確認
   - 入力データ・期待結果・前提条件の明確性確認
   - 実装時の曖昧性排除確認

5. **総合判定**
   - 全評価項目の基準達成状況確認
   - 総合品質スコア算出
   - Pass/Fail/Conditional Pass判定

### 2.2 自動チェック機能
```typescript
interface QualityGate5Checker {
  // ケース数自動集計
  countTestCases(testCaseFile: string): TestCaseCount;
  countTestTargets(targetFile: string): TestTargetCount;
  
  // 整合性率自動算出
  calculateConsistencyRate(cases: TestCaseCount, targets: TestTargetCount): number;
  
  // 不足ケースの自動特定
  identifyMissingCases(cases: TestCase[], targets: TestTarget[]): MissingCase[];
  
  // カバレッジ自動分析
  analyzeCoverage(cases: TestCase[], targets: TestTarget[]): CoverageAnalysis;
  
  // トレーサビリティ自動確認
  verifyTraceability(cases: TestCase[], requirements: Requirement[]): TraceabilityResult;
}
```

## 3. 品質基準と判定

### 3.1 合格基準
| 評価カテゴリ | 合格基準 | 重要度 |
|-------------|----------|--------|
| ケース数整合性 | ≥ 95% | 必須 |
| カバレッジ完全性 | = 100% | 必須 |
| トレーサビリティ | = 100% | 必須 |
| 実装可能性 | = 100% | 必須 |

### 3.2 判定基準
- **Pass**: 全ての必須基準を満たしている
- **Conditional Pass**: 軽微な不足があるが、計画的な改善が可能
- **Fail**: 重大な不足があり、STEP 4.3への戻りが必要

### 3.3 総合品質スコア算出
```
総合スコア = (ケース数整合性×0.3 + カバレッジ完全性×0.3 + トレーサビリティ×0.2 + 実装可能性×0.2)
```

| 項目 | 重み | 実績 | 加重スコア |
|------|------|------|-----------|
| ケース数整合性 | 30% | [%] | [値] |
| カバレッジ完全性 | 30% | [%] | [値] |
| トレーサビリティ | 20% | [%] | [値] |
| 実装可能性 | 20% | [%] | [値] |
| **総合スコア** | **100%** | **[%]** | **[値]** |

## 4. 不合格時の改善アクション

### 4.1 ケース数不足の場合
1. **不足ケースの特定**
   - 対象一覧との差分分析
   - 不足している観点の特定
   - 影響度評価

2. **原因分析**
   - 仕様理解不足の確認
   - 展開ルール適用ミスの確認
   - 複雑度評価ミスの確認

3. **改善実施**
   - 不足ケースの追加定義
   - 仕様再確認とケース見直し
   - 展開ルール再適用

### 4.2 カバレッジ不足の場合
1. **未カバー項目の特定**
   - カバレッジマトリクス分析
   - 未カバー要件の特定
   - 影響度評価

2. **追加ケース設計**
   - 未カバー項目のケース追加
   - 境界値・異常系の補強
   - 組み合わせパターンの追加

### 4.3 トレーサビリティ不足の場合
1. **対応関係の修正**
   - 対象-ケース対応表の更新
   - 要件-ケース対応表の更新
   - 双方向追跡の確保

2. **マトリクス完成**
   - トレーサビリティマトリクスの完成
   - 対応関係の100%確保
   - 追跡可能性の確認

## 5. 完了確認チェックリスト

### 5.1 必須確認項目
- [ ] テスト対象一覧との整合性率が95%以上である
- [ ] 全対象のカバレッジが100%である
- [ ] トレーサビリティが100%確保されている
- [ ] 全ケースが実装可能な形で定義されている
- [ ] 自動チェック機能による検証が完了している

### 5.2 品質確認項目
- [ ] 仕様分析ベース展開が適切に実施されている
- [ ] 表形式による効率的な定義が完了している
- [ ] ファイル分割が適切に実施されている（必要に応じて）
- [ ] 実装サンプルが最小限で提供されている
- [ ] 総合品質スコアが90%以上である

### 5.3 次工程準備項目
- [ ] STEP 5（開発計画）への引き継ぎ情報が整理されている
- [ ] テストケース実装計画が策定されている
- [ ] 品質ゲート結果が文書化されている
- [ ] ステークホルダーレビューが完了している

## 6. 判定結果

### 6.1 最終判定
| 項目 | 結果 |
|------|------|
| 判定 | Pass/Fail/Conditional Pass |
| 判定日 | YYYY-MM-DD |
| 判定者 | [品質保証マネージャー名] |
| 総合スコア | [数値]/100 |
| 次工程承認 | Yes/No |

### 6.2 判定コメント
```
[判定理由と特記事項を記載]
- 整合性率: [%] (基準: 95%以上)
- カバレッジ: [%] (基準: 100%)
- トレーサビリティ: [%] (基準: 100%)
- 実装可能性: [%] (基準: 100%)
```

### 6.3 改善要求事項（不合格時）
| 項目 | 問題点 | 改善アクション | 期限 | 担当者 |
|------|--------|--------------|------|--------|
| [項目] | [問題] | [アクション] | [日付] | [名前] |

## 7. 承認

| 役割 | 氏名 | 承認日 | 署名 |
|------|------|--------|------|
| 品質保証マネージャー | | | |
| テストリード | | | |
| プロジェクトマネージャー | | | |
| テクニカルリード | | | |
